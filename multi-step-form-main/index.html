<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <link rel="stylesheet" href="style.css">
  <title>Frontend Mentor | Multi-step form</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: hsl(228, 45%, 44%); }
  </style>
</head>
<body>

  <!-- Sidebar start -->
  <div class="container">
    <div class="cartao">
      <div class="sidebar">
        <div class="imagem">
          <img src="assets/images/bg-sidebar-desktop.svg" alt="">
        </div>
        <div class="menu">
          <div class="item">
            <a href="#" class="indice focused">1</a>
            <p><span>STEP 1</span><br>
            <b>YOUR INFO</b></p>
          </div>
          <div class="item">
            <a href="#" class="indice">2</a>
            <p><span>STEP 2</span><br>
            <b>SELECT PLAN</b></p>
          </div>
          <div class="item">
            <a href="#" class="indice">3</a>
            <p><span>STEP 3</span><br>
            <b>ADD-ONS</b></p>
          </div>
          <div class="item">
            <a href="#" class="indice">4</a>
            <p><span>STEP 4</span><br>
            <b>SUMMARY</b></p>
          </div>
        </div>
      </div>
      <div class="main">
        <div>
          <h1>Personagel info</h1>
          <p>Please provide your name, email address, and phone number.</p>
        </div>
        <div class="form">
          <label for="">Name<span style="float: right" id="alerta"></span></label>
          <input type="text" name="nome" id="nome" placeholder="e.g. Stephen King">

          <label for="">Email Address<span style="float: right" id="alerta"></span></label>
          <input type="email" name="email" id="email" placeholder="e.g. stephenking@lorem.com">

          <label for="">Phone Number<span style="float: right" id="alerta"></span></label>
          <input type="tel" name="numero" id="numero" placeholder="e.g. +1 234 567 890" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" maxlength="10">

          <div class="botoes">
            <input type="button" value="Go Back" id="btn-back" onclick="nextPrev(-1)">
            <!-- <input type="submit" value="Next Step" id="btn-next" onclick="nextPrev(1)"> -->
            <input type="submit" value="Next Step" id="btn-next" class="enviar">
          </div>
        </div>
      </div>

      <div class="main" style="display: none;">
        <div>
          <h1>Select your plan</h1>
          <p>You have the option of monthly or yearly billing.</p>
        </div>
        <div class="form">
          <div class="lista-planos">
            <button class="plano selected" type="button" onclick="selectButton(1)">
              <div class="icone">
                <img src="assets/images/icon-arcade.svg" alt="arcade">
              </div>
              <div class="preco">
                <span id="sub"><b>Arcade</b></span>
                <span>$9/mo</span>
                <span id="yearly">2 months free</span>
              </div>
            </button>
  
            <button class="plano" type="button" onclick="selectButton(2)">
              <div class="icone">
                <img src="assets/images/icon-advanced.svg" alt="advanced">
              </div>
              <div class="preco">
                <span id="sub"><b>Advanced</b></span>
                <span>$12/mo</span>
                <span id="yearly">2 months free</span>
              </div>
            </button>

            <button class="plano" type="button" onclick="selectButton(3)">
              <div class="icone">
                <img src="assets/images/icon-pro.svg" alt="pro">
              </div>
              <div class="preco">
                <span id="sub"><b>Pro</b></span>
                <span>$15/mo</span>
                <span id="yearly">2 months free</span>
              </div>
            </button>
          </div>

          <div class="area-checkbox">
            <span class="monthly">MonthLy</span>
            <label class="switch">
              <input type="checkbox" id="checkbox">
              <span class="slider round"></span>
            </label>
            <span class="year">YearLy</span>
          </div>
          <div class="botoes">
            <input type="button" value="Go Back" id="btn-back" onclick="nextPrev(-1)">
            <!-- <input type="submit" value="Next Step" id="btn-next" onclick="nextPrev(1)"> -->
            <input type="button" value="Next Step" id="btn-next" onclick="nextPrev(1)">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Step 3 start -->

  <!-- Pick add-ons
  Add-ons help enhance your gaming experience.

  Online service
  Access to multiplayer games
  +$1/mo

  Larger storage
  Extra 1TB of cloud save
  +$2/mo

  Customizable Profile
  Custom theme on your profile
  +$2/mo

  Go Back
  Next Step -->

  <!-- Step 3 end -->

  <!-- Step 4 start -->

  <!-- Finishing up
  Double-check everything looks OK before confirming. -->

  <!-- Dynamically add subscription and add-on selections here -->

  <!-- Total (per month/year)

  Go Back
  Confirm -->

  <!-- Step 4 end -->

  <!-- Step 5 start -->

  <!-- Thank you!

  Thanks for confirming your subscription! We hope you have fun 
  using our platform. If you ever need support, please feel free 
  to email us at support@loremgaming.com. -->

  <!-- Step 5 end -->
  
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
    Coded by <a href="#">Your Name Here</a>.
  </div>

  <script>
    // Captura os elementos de input e spans de aviso
    const inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"]');
    const alertas = document.querySelectorAll('#alerta');
    const email = document.getElementById('email');
    const numero = document.getElementById('numero');
    const checkbox = document.getElementById('checkbox');
    const enviar = document.getElementsByClassName('enviar');
    // console.log(enviar[0]);

    // Adiciona um evento de verificaÃ§Ã£o quando algum input perder o foco
    inputs.forEach((input, index) => {
      input.addEventListener('input', () => {
        if (input.value.trim() === '') {
          alertas[index].style.display = 'inline'; // Mostra o span de aviso correspondente
          alertas[index].innerHTML = 'This field is required';
          input.style.borderColor = 'hsl(354, 84%, 57%)';
          return false
        } else {
          alertas[index].style.display = 'none';   // Esconde o span de aviso
          input.style.borderColor = 'hsl(243, 100%, 62%)';
        }
      })
    });

    // Verifica se o email Ã© valido
    email.addEventListener('input', () => {
      var validRegex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      if (!email.value.match(validRegex)) {
        alertas[1].style.display = 'inline';
        alertas[1].innerHTML = 'Invalid email address';
        return false
      } else {
        alertas[1].style.display = 'none';
      }
    });

    // Verifica se o nÃºmero de telefone Ã© valido
    numero.addEventListener('input', () => {
      var re = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
      if ((!numero.value.match(re)) || numero.value.length != 10) {
        alertas[2].style.display = 'inline';
        alertas[2].innerHTML = 'Invalid telephone number';
        return false
      } else {
        alertas[2].style.display = 'none';
      }
    });

    // Valida o formulÃ¡rio
    enviar[0].addEventListener('click', () => {
      inputs.forEach((input, index) => {
        if (input.value.trim() === '') {
          alertas[index].style.display = 'inline'; // Mostra o span de aviso correspondente
          alertas[index].innerHTML = 'This field is required';
          input.style.borderColor = 'hsl(354, 84%, 57%)';
          return false
        } else {
          alertas[index].style.display = 'none';   // Esconde o span de aviso
          input.style.borderColor = 'hsl(243, 100%, 62%)';
        }
      });

      var validRegex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      if (!email.value.match(validRegex)) {
        alertas[1].style.display = 'inline';
        alertas[1].innerHTML = 'Invalid email address';
        return false
      } else {
        alertas[1].style.display = 'none';
      };

      var re = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
      if ((!numero.value.match(re)) || numero.value.length != 10) {
        alertas[2].style.display = 'inline';
        alertas[2].innerHTML = 'Invalid telephone number';
        return false
      } else {
        alertas[2].style.display = 'none';
      };
      
      return nextPrev(1);

    })

    // Navega para a prÃ³xima tab ou para a anterior
    current = 0

    function nextPrev(n) {
      var indices = document.querySelectorAll('.indice');
      var tabs = document.querySelectorAll('.main');

      tabs[current].style.display = 'none';
      indices[current].classList.remove('focused');
      current += n;
      
      tabs[current].style.display = 'flex';
      indices[current].classList.add('focused');

      if (current == 0) {
        document.getElementById('btn-back').style.display = 'none';
        indices[current].classList.add('focused');
      }
    }

    // Exibe o texto ao clicar no checkbox e vice-versa

    checkbox.addEventListener('change', () => {
      const yearlyElements = document.querySelectorAll('#yearly');
      let mSpam = document.getElementsByClassName('monthly');
      let ySpam = document.getElementsByClassName('year');

      yearlyElements.forEach(index => {
        if (checkbox.checked) {
          ySpam[0].style.color = "hsl(213, 96%, 18%)"; //azul
          mSpam[0].style.color = "hsl(231, 11%, 63%)"; //cinza
          index.style.display = 'block';
        } else {
          ySpam[0].style.color = "hsl(231, 11%, 63%)";
          mSpam[0].style.color = "hsl(213, 96%, 18%)";
          index.style.display = 'none';
        }
      });
    });

    // Oculta o botÃ£o de voltar
    document.addEventListener('DOMContentLoaded', () => {
      if (current == 0) {
        document.getElementById('btn-back').style.display = 'none'
      }
    });

    // Seleciona o botÃ£o e 'desseleciona' os outros
    let selectedButton = null;

    function selectButton(buttonIndex) {
      const buttons = document.querySelectorAll('.plano');
      
      buttons.forEach((button, index) => {
        if (index + 1 === buttonIndex) {
          button.classList.add('selected');
          selectedButton = button;
        } else {
          button.classList.remove('selected');
        }
      });
    }


  </script>
</body>
</html>
